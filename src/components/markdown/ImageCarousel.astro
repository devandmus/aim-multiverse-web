---
export interface Props {
    images: string[];
    captions?: string[];
    autoplay?: boolean;
    interval?: number;
}

const {
    images,
    captions = [],
    autoplay = false,
    interval = 5000,
} = Astro.props;
const carouselId = `carousel-${Math.random().toString(36).substr(2, 9)}`;
---

<div
    class="image-carousel bg-base-darker border border-neon-cyan rounded-xl p-6 mb-8"
>
    <div
        id={carouselId}
        class="carousel slide"
        data-bs-ride={autoplay ? "carousel" : "false"}
        data-bs-interval={interval}
    >
        <div class="carousel-indicators">
            {
                images.map((_, index) => (
                    <button
                        type="button"
                        data-bs-target={`#${carouselId}`}
                        data-bs-slide-to={index}
                        class={index === 0 ? "active" : ""}
                        aria-current={index === 0 ? "true" : "false"}
                        aria-label={`Slide ${index + 1}`}
                    />
                ))
            }
        </div>

        <div class="carousel-inner">
            {
                images.map((image, index) => (
                    <div class={`carousel-item ${index === 0 ? "active" : ""}`}>
                        <img
                            src={image}
                            class="d-block w-100 rounded-lg"
                            alt={captions[index] || `Imagen ${index + 1}`}
                            loading="lazy"
                        />
                        {captions[index] && (
                            <div class="carousel-caption d-none d-md-block bg-base-dark/80 rounded-lg p-3">
                                <p class="text-base-light mb-0">
                                    {captions[index]}
                                </p>
                            </div>
                        )}
                    </div>
                ))
            }
        </div>

        <button
            class="carousel-control-prev"
            type="button"
            data-bs-target={`#${carouselId}`}
            data-bs-slide="prev"
        >
            <span
                class="carousel-control-prev-icon bg-neon-cyan rounded-full p-2"
                aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>

        <button
            class="carousel-control-next"
            type="button"
            data-bs-target={`#${carouselId}`}
            data-bs-slide="next"
        >
            <span
                class="carousel-control-next-icon bg-neon-cyan rounded-full p-2"
                aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
</div>

<style>
    .image-carousel .carousel-control-prev-icon,
    .image-carousel .carousel-control-next-icon {
        width: 40px;
        height: 40px;
    }

    .image-carousel .carousel-indicators button {
        background-color: var(--neon-cyan);
        border: none;
        border-radius: 50%;
        width: 12px;
        height: 12px;
        margin: 0 4px;
    }

    .image-carousel .carousel-indicators button.active {
        background-color: var(--neon-pink);
    }

    .image-carousel .carousel-item img {
        max-height: 400px;
        object-fit: cover;
    }
</style>
