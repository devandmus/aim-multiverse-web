---
export interface Props {
    src: string;
    title?: string;
    thumbnail?: string;
    autoplay?: boolean;
    controls?: boolean;
    width?: string;
    height?: string;
}

const {
    src,
    title = "Video",
    thumbnail,
    autoplay = false,
    controls = true,
    width = "100%",
    height = "400px",
} = Astro.props;
---

<div
    class="video-embed bg-base-darker border border-neon-cyan rounded-xl p-6 mb-8"
>
    <div class="video-container" style={`width: ${width}; height: ${height};`}>
        <video
            class="w-full h-full rounded-lg"
            controls={controls}
            autoplay={autoplay}
            poster={thumbnail}
            preload="metadata"
        >
            <source src={src} type="video/mp4" />
            <source src={src} type="video/webm" />
            <p class="text-base-grey text-center p-4">
                Tu navegador no soporta la reproducción de video.
                <a href={src} class="text-neon-cyan underline"
                    >Descarga el video aquí</a
                >
            </p>
        </video>
    </div>
    {
        title && (
            <div class="mt-4 text-center">
                <h4 class="text-base-light font-semibold">{title}</h4>
            </div>
        )
    }
</div>

<style>
    .video-embed video {
        background-color: var(--base-dark);
    }

    .video-embed video::-webkit-media-controls {
        background-color: var(--base-dark);
    }
</style>
