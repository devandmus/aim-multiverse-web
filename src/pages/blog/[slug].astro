---
import { getCollection } from "astro:content";
import BlogPostLayout from "../../layouts/BlogPostLayout.astro";
import {
    ImageCarousel,
    VideoEmbed,
    CodeBlock,
    Callout,
} from "../../components/markdown";

export async function getStaticPaths() {
    const posts = await getCollection("blog");
    return posts
        .filter((post) => !post.data.draft)
        .map((post) => ({
            params: { slug: post.slug },
            props: { post },
        }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<BlogPostLayout
    frontmatter={post.data}
    url={Astro.url.pathname}
    currentPost={post}
>
    <Content
        components={{
            // Componentes existentes
            ImageCarousel,
            VideoEmbed,
            CodeBlock,
            Callout,
        }}
    />
</BlogPostLayout>
